import{j as e,R as h,C as n,F as c,I as j,L as w,T as v,r as x,u as E,y as W,P as z,z as R}from"./index-D-npGLHc.js";import{i as u,g as T,I}from"./Information-D0gjKbsP.js";import{M as y,S as O,F as A,a as D}from"./FormInputNumber-CMInHmf_.js";import{B as d}from"./button-CqA7Y-CK.js";import{a as L}from"./apiConfig-B-um9kQa.js";import"./profileAction-B2QQ8qnK.js";import"./DownOutlined--0NHZiwD.js";import"./index-BqX5Bx2J.js";const{Text:a}=v,m=o=>{const t=o,s=t.dataPayment;return e.jsx(h,{gutter:[16,16],children:e.jsxs(n,{span:24,children:[t.type==="Confirmation"&&e.jsx(y,{centered:!0,open:t.open,onCancel:t.onCancel,closable:!1,maskClosable:!0,width:"20%",footer:!1,children:e.jsxs(c,{justify:"center",align:"center",gap:12,vertical:!0,children:[e.jsx(j,{width:50,height:50,src:w}),e.jsx(n,{span:24,children:e.jsxs(c,{vertical:!0,justify:"center",align:"center",children:[e.jsxs(a,{children:["Beli ",s==null?void 0:s.service_name," senilai"]}),e.jsxs(a,{style:{fontSize:24,fontWeight:750},children:["Rp",u(s==null?void 0:s.service_tariff)," ?"]})]})}),e.jsx(n,{span:24,children:e.jsxs(c,{vertical:!0,gap:8,children:[e.jsx(d,{type:"text-red",block:!0,onClick:t.onOk,children:e.jsx(a,{type:"red",style:{fontWeight:600,fontSize:14},children:t.buttonOkText})}),e.jsx(d,{type:"text",block:!0,onClick:t.onCancel,children:e.jsx(a,{type:"dark-grey",style:{fontWeight:600},children:"Batalkan"})})]})})]})}),t.type==="Success"&&e.jsx(y,{centered:!0,open:t.open,onCancel:t.onCancel,closable:!1,maskClosable:!0,width:"20%",footer:!1,children:e.jsxs(c,{justify:"center",align:"center",gap:12,vertical:!0,children:[e.jsx(j,{width:50,height:50,src:O}),e.jsx(n,{span:24,children:e.jsxs(c,{vertical:!0,justify:"center",align:"center",children:[e.jsxs(a,{children:["Pembayaran ",s==null?void 0:s.service_name," sebesar"]}),e.jsxs(a,{style:{fontSize:24,fontWeight:750},children:["Rp",u(s==null?void 0:s.service_tariff)]}),e.jsx(a,{type:"dark-grey",style:{fontSize:14,fontWeight:500},children:t.textResult})]})}),e.jsx(n,{span:24,children:e.jsx(d,{type:"text",block:!0,onClick:t.onCancel,children:e.jsx(a,{type:"red",style:{fontWeight:600},children:"Kembali ke beranda"})})})]})}),t.type==="Failed"&&e.jsx(y,{centered:!0,open:t.open,onCancel:t.onCancel,closable:!1,maskClosable:!0,width:"20%",footer:!1,children:e.jsxs(c,{justify:"center",align:"center",gap:12,vertical:!0,children:[e.jsx(j,{width:50,height:50,src:A}),e.jsx(n,{span:24,children:e.jsxs(c,{vertical:!0,justify:"center",align:"center",children:[e.jsxs(a,{children:["Pembayaran ",s==null?void 0:s.service_name," sebesar"]}),e.jsxs(a,{style:{fontSize:24,fontWeight:750},children:["Rp",u(s==null?void 0:s.service_tariff)]}),e.jsx(a,{type:"dark-grey",style:{fontSize:14,fontWeight:500},children:t.textResult})]})}),e.jsx(n,{span:24,children:e.jsx(d,{type:"text",block:!0,onClick:t.onCancel,children:e.jsx(a,{type:"red",style:{fontWeight:600},children:"Kembali ke beranda"})})})]})})]})})},N=(o,t,s)=>async i=>{await i({type:"SET_PAYMENT"}),L("/transaction",o).then(l=>(i({type:"SET_PAYMENT_SUCCESS",payload:{data:l==null?void 0:l.data}}),t&&t(l))).catch(l=>(i({type:"SET_PAYMENT_FAILED"}),s&&s(l)))},{Text:k}=v,_=o=>{const{paymentService:t}=o,[s,i]=x.useState(!1),[l,g]=x.useState(!1),[P,b]=x.useState(!1),p=E();x.useEffect(()=>{p(T())},[p]);const f=W(r=>r.balance),C=()=>{var S;const r={isDisable:!1,type:"disable"};return t.service_tariff!==0||t.service_tariff!==null||((S=f==null?void 0:f.data)==null?void 0:S.balance)>=t.service_tariff?(r.isDisable=!1,r.type="primary"):(r.isDisable=!0,r.type="disable"),r},F=()=>{const r={service_code:t==null?void 0:t.service_code};p(N(r,()=>{i(!1),g(!0)},()=>{i(!1),b(!0)}))},M=()=>{g(!1),p(T())};return e.jsx(e.Fragment,{children:e.jsxs(h,{gutter:[24,24],children:[e.jsx(n,{span:24,children:e.jsxs(h,{gutter:[0,12],children:[e.jsx(n,{span:24,children:e.jsx(k,{style:{fontSize:24,fontWeight:400},children:"Pembayaran"})}),e.jsx(n,{span:24,children:e.jsxs(c,{align:"center",gap:12,children:[e.jsx(j,{preview:!1,src:t==null?void 0:t.service_icon,style:{width:50,height:50}}),e.jsx(k,{style:{fontSize:24,fontWeight:700},children:t==null?void 0:t.service_name})]})})]})}),e.jsx(n,{span:24,children:e.jsxs(h,{gutter:[24,24],children:[e.jsx(n,{span:24,children:e.jsx(D,{type:"Currency Disable",formName:"topupAmount",placeHolder:"0",value:t.service_tariff})}),e.jsx(n,{span:24,children:e.jsx(d,{type:C().type,style:{width:"100%"},size:"large",htmlType:"submit",disabled:C().isDisable,onClick:()=>i(!0),children:"Bayar"})})]})}),e.jsx(n,{children:e.jsx(m,{type:"Confirmation",dataPayment:t,open:s,onOk:()=>F(),onCancel:()=>i(!1),buttonOkText:"Ya, lanjutkan bayar"})}),e.jsx(n,{children:e.jsx(m,{type:"Success",dataPayment:t,open:l,onCancel:M,textResult:"berhasil"})}),e.jsx(n,{children:e.jsx(m,{type:"Failed",dataPayment:t,open:P,onCancel:()=>b(!1),textResult:"gagal"})})]})})};_.propTypes={paymentService:z.string};const J=()=>{const t=R().state;return e.jsx(e.Fragment,{children:e.jsxs(h,{gutter:[32,42],justify:"center",children:[e.jsx(n,{span:20,children:e.jsx(I,{})}),e.jsx(n,{span:20,children:e.jsx(_,{paymentService:t})})]})})};export{J as default};
